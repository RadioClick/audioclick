<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Click â€“ MedellÃ­n</title>

<style>
/* === TU CSS ORIGINAL (NO TOCADO) === */
/* (AquÃ­ va exactamente el CSS que ya tenÃ­as) */
</style>
</head>

<body>

<!-- HEADER -->
<header class="header">
  <img src="botero.jpg" class="logo" alt="Radio Click">
</header>

<!-- CONTENEDOR PRINCIPAL -->
<main class="container">

  <!-- INDICADORES -->
  <section class="stats">
    ğŸ“» Oyentes <span id="listeners">110.258</span><br>
    ğŸ“§ Suscritos <span id="subscribers">52.437</span><br>
    ğŸ‘ <span id="likeCount">10.511</span>
    ğŸ‘ <span id="dislikeCount">541</span>
  </section>

  <!-- PLAYER -->
  <section class="player">
    <button onclick="togglePlay()" id="playBtn">
      <span id="playIcon">â–¶ï¸</span> UNIRSE AL DIRECTO
    </button>

    <div class="progress-bar" onclick="seek(event)">
      <div id="progressFill"></div>
    </div>

    <div class="time">
      <span id="currentTime">0:00</span> /
      <span id="duration">60:00</span>
    </div>

    <div class="volume">
      <span class="volume-icon" onclick="toggleMute()">ğŸ”Š</span>
      <input type="range" min="0" max="100" value="70"
        onchange="changeVolume(this.value)">
    </div>
  </section>

  <!-- COMENTARIOS -->
  <section id="commentsContainer" class="comments"></section>

  <!-- WHATSAPP -->
  <footer onclick="shareWhatsApp()" class="share">
    radioclick.github.io/audioclick/
  </footer>

</main>

<audio id="mainAudio" preload="none"></audio>

<script>
/* =====================================================
   RADIO CLICK â€“ HTML FINAL EJECUTABLE
===================================================== */

// ===== AUDIO 24/7 =====
const audio = document.getElementById('mainAudio');
audio.volume = 0.7;

const CAPSULAS = [
  'capsula1.mp3',
  'capsula2.mp3',
  'capsula3.mp3',
  'capsula4.mp3',
  'capsula5.mp3'
];

const DURACION_CAPSULA = 3600;
const DURACION_CICLO = CAPSULAS.length * DURACION_CAPSULA;
let cambioProgramado = null;

function sincronizarAudio() {
  const now = new Date();
  const seconds =
    now.getUTCHours() * 3600 +
    now.getUTCMinutes() * 60 +
    now.getUTCSeconds();

  const pos = seconds % DURACION_CICLO;
  const index = Math.floor(pos / DURACION_CAPSULA);
  const offset = pos % DURACION_CAPSULA;

  audio.src = CAPSULAS[index];
  audio.currentTime = offset;
  audio.play();
  document.getElementById('playIcon').textContent = 'â¸ï¸';
  programarCambio();
}

function programarCambio() {
  clearTimeout(cambioProgramado);
  cambioProgramado = setTimeout(
    sincronizarAudio,
    (DURACION_CAPSULA - audio.currentTime) * 1000
  );
}

function togglePlay() {
  if (audio.paused) sincronizarAudio();
  else {
    audio.pause();
    document.getElementById('playIcon').textContent = 'â–¶ï¸';
  }
}

// ===== CONTADORES =====
let counters = JSON.parse(localStorage.getItem('radioCounters')) || {
  listeners: 110258,
  subscribers: 52437,
  likes: 10511,
  dislikes: 541
};

function updateCounters() {
  listeners.textContent = counters.listeners.toLocaleString('es-CO');
  subscribers.textContent = counters.subscribers.toLocaleString('es-CO');
  likeCount.textContent = counters.likes.toLocaleString('es-CO');
  dislikeCount.textContent = counters.dislikes.toLocaleString('es-CO');
}

setInterval(() => {
  counters.listeners += Math.floor(Math.random() * 4) + 2;
  if (Math.random() < 0.15) counters.subscribers++;
  if (Math.random() < 0.1) counters.likes++;
  localStorage.setItem('radioCounters', JSON.stringify(counters));
  updateCounters();
}, 15000);

updateCounters();

// ===== COMENTARIOS =====
const names = [
  "MarÃ­a G.","Carlos R.","Ana M.","JosÃ© L.",
  "Laura F.","Camila R.","SebastiÃ¡n O."
];

const texts = [
  "Excelente transmisiÃ³n ğŸ“»",
  "Saludos desde MedellÃ­n ğŸ™ï¸",
  "Muy profesional ğŸ‘",
  "Siempre los escucho ğŸ”¥",
  "Gran informaciÃ³n ğŸ’¯"
];

let comments = [];

function addComment() {
  comments.unshift({
    name: names[Math.floor(Math.random()*names.length)],
    text: texts[Math.floor(Math.random()*texts.length)]
  });
  if (comments.length > 5) comments.pop();

  commentsContainer.innerHTML = comments.map(c =>
    `<div class="comment">
      <strong>${c.name}</strong><br>${c.text}
    </div>`
  ).join('');
}

setTimeout(addComment, 2000);
setInterval(addComment, 12000);

// ===== UI =====
audio.addEventListener('timeupdate', () => {
  progressFill.style.width =
    (audio.currentTime / audio.duration) * 100 + '%';
  currentTime.textContent = format(audio.currentTime);
});

audio.addEventListener('loadedmetadata', () => {
  duration.textContent = format(audio.duration);
});

function format(s) {
  const m = Math.floor(s / 60);
  const sec = Math.floor(s % 60);
  return `${m}:${sec.toString().padStart(2,'0')}`;
}

function changeVolume(v){ audio.volume = v/100; }
function toggleMute(){ audio.volume = audio.volume ? 0 : 0.7; }

function shareWhatsApp() {
  window.open(
    'https://wa.me/?text=' +
    encodeURIComponent('radioclick.github.io/audioclick/'),
    '_blank'
  );
}
</script>

</body>
</html>
